<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>DRAGE Chat</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="shortcut icon"
        href="https://yt3.googleusercontent.com/UqMYqkzSVzqj9h_Fv3cj-P60co_6nbuEuaEuUiC5d3Bf9IyoHKDaZi584ICJnqsNzZ9SHN6UTg=s900-c-k-c0x00ffffff-no-rj"
        type="image/x-icon">
    <!-- <meta http-equiv="Content-Security-Policy" content="default-src 'self'; img-src https://*; child-src 'none';" /> -->
    <style>
        .city {
            display: none
        }


        .showUserId {
            font-family: monospace;
            color: red;
        }

        #messageListdiv {
            height: 70dvh !important;
            overflow-x: hidden;
            overflow-y: auto;
            scroll-behavior: smooth;
            background-color: white;
        }

        #chatsView {
            width: 80% !important;
            height: 80dvh !important;
        }

        #joinView {
            width: 30% !important;
            margin-top: 25dvh;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.3s ease-out;
        }

        #joinView.show {
            opacity: 1;
            transform: translateY(0);
        }

        #scrollbutton {
            display: none;
        }

        #img1 {
            background-image: url("https://images.pexels.com/photos/620337/pexels-photo-620337.jpeg?cs=srgb&dl=pexels-pripicart-620337.jpg&fm=jpg");
            background-size: 100% 100%;
        }
        #img2 {
            background-image: url("https://financial-cents.com/resources/wp-content/webpc-passthru.php?src=https://financial-cents.com/resources/wp-content/uploads/2023/10/AM-11.png&nocache=1");
            background-size: 100% 100%;
        }
        #img3 {
            background-image: url("https://preview.redd.it/like-can-you-not-please-v0-9wtq868yroxd1.jpeg?width=640&crop=smart&auto=webp&s=0e2365db9593ab55b8cdfba0cf1497c7276175e4");
            background-size: 100% 100%;
        }
        #img4 {
            background-image: url("https://plaky.com/blog/wp-content/uploads/2023/03/Procrastination-meme.png");
            background-size: 100% 100%;
        }
        #img5 {
            background-image: url("https://miro.medium.com/v2/resize:fit:1400/1*GI-td9gs8D5OKZd19mAOqA.png");
            background-size: 100% 100%;
        }
        #img6 {
            background-image: url("https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTb3WRxwZwCSkq5LiQVqQD6S4QHQjzqFHIXJg&s");
            background-size: 100% 100%;
        }
        
        #gif1{
            background-image: url("https://cultofthepartyparrot.com/parrots/hd/parrot.gif");
            background-size: 100% 100%;
        }
        #gif2{
            background-image: url("https://media3.giphy.com/media/3oEjI5VtIhHvK37WYo/giphy.gif");
            background-size: 100% 100%;
        }
        #gif3{
            background-image: url("https://i.pinimg.com/originals/0c/64/9a/0c649a17ec1e5f5ca340248b4ef4e4be.gif");
            background-size: 100% 100%;
        }
        #gif4{
            background-image: url("https://i.pinimg.com/originals/de/05/c3/de05c375cd0c20ed4b5157fe361b5c8e.gif");
            background-size: 100% 100%;
        }
        #gif5{
            background-image: url("https://www.icegif.com/wp-content/uploads/2022/01/icegif-982.gif");
            background-size: 100% 100%;
        }
        #gif6{
            background-image: url("https://miro.medium.com/v2/resize:fit:692/1*9PYEkmnHDS2ygawLE0e0XQ.gif");
            background-size: 100% 100%;
        }

        /* Add these new animation styles */
        .fade-in {
            opacity: 0;
            transition: opacity 0.3s ease-in;
        }

        .fade-in.show {
            opacity: 1;
        }

        .slide-up {
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.3s ease-out;
        }

        .slide-up.show {
            opacity: 1;
            transform: translateY(0);
        }

        /* Apply animations to specific elements */
        #chatsView {
            width: 80% !important;
            height: 80dvh !important;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.3s ease-out;
        }

        #chatsView.show {
            opacity: 1;
            transform: translateY(0);
        }

        .alert {
            opacity: 0;
            transform: translateY(-20px);
            transition: all 0.3s ease-out;
        }

        .alert.show {
            opacity: 1;
            transform: translateY(0);
        }

        /* Dark mode styles */
        .dark-mode {
            background-color: #121212;
            color: #ffffff;
        }

        .dark-mode #joinView {
            background-color: #1e1e1e;
            color: #ffffff;
        }

        .dark-mode #usernameInput {
            background-color: #2d2d2d;
            color: #ffffff;
            border-color: #404040;
        }

        .dark-mode #messageInput {
            background-color: #2d2d2d;
            color: #ffffff;
        }

        .dark-mode .messages {
            background-color: #1e1e1e !important;
        }

        .dark-mode #messageListdiv {
            background-color: #1e1e1e !important;
        }

        .dark-mode .input {
            background-color: #1e1e1e;
            border-color: #404040;
        }

        /* Modal dark mode styles */
        .dark-mode .w3-modal-content {
            background-color: #1e1e1e;
            color: #ffffff;
        }

        .dark-mode .w3-container.w3-light-grey {
            background-color: #2d2d2d !important;
            color: #ffffff;
        }

        .dark-mode .w3-bar {
            background-color: #2d2d2d;
            border-color: #404040;
        }

        .dark-mode .w3-bar-item {
            color: #ffffff;
        }

        .dark-mode .w3-light-grey {
            background-color: #363636 !important;
            color: #ffffff;
        }

        /* Alert styles in dark mode */
        .dark-mode .alert {
            background-color: #2d2d2d;
            border-color: #404040;
            color: #ffffff;
        }

        .dark-mode .alert-danger {
            background-color: #442726;
            border-color: #dc3545;
        }

        .dark-mode .alert-warning {
            background-color: #443e26;
            border-color: #ffc107;
        }

        .dark-mode .alert-info {
            background-color: #263844;
            border-color: #0dcaf0;
        }

        .dark-mode .alert-light {
            background-color: #2d2d2d;
            border-color: #404040;
        }

        .dark-mode .alert-primary {
            background-color: #26304d;
            border-color: #0d6efd;
        }

        /* Text colors in dark mode */
        .dark-mode .text-gray-400 {
            color: #a0a0a0;
        }

        .dark-mode .text-gray-500 {
            color: #909090;
        }

        /* Button styles in dark mode */
        .dark-mode .w3-button.w3-white {
            background-color: #2d2d2d !important;
            color: #ffffff;
            border-color: #404040 !important;
        }

        .dark-mode .w3-button.w3-white:hover {
            background-color: #363636 !important;
        }

        /* Header styles in dark mode */
        .dark-mode .w3-container.w3-blue {
            background-color: #1a365d !important;
        }

        /* Message animation styles */
        .message-item {
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.3s ease-out;
        }

        .message-item.show {
            opacity: 1;
            transform: translateY(0);
        }

        /* Smooth scrolling for message container */
        #messageListdiv {
            scroll-behavior: smooth;
        }

        #usernameInput {
            color: black !important;
        }

        .reaction-btn {
            @apply px-2 py-1 rounded-md text-sm transition-all duration-200 transform hover:scale-105 shadow-sm;
            @apply bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600;
        }

        .reaction-btn.reacted {
            @apply bg-indigo-100 dark:bg-indigo-700 border-indigo-500;
        }

        /* Mention highlight styles */
        .mentioned-message {
            background-color: rgba(99, 102, 241, 0.1);
            border-left: 4px solid #6366f1;
            margin-left: -4px;
        }

        /* Dark mode mention styles */
        .dark-mode .mentioned-message {
            background-color: rgba(99, 102, 241, 0.2);
        }

        /* Optional animation for new mentions */
        @keyframes mentionPulse {
            0% { background-color: rgba(99, 102, 241, 0.2); }
            50% { background-color: rgba(99, 102, 241, 0.1); }
            100% { background-color: rgba(99, 102, 241, 0.2); }
        }

        .mentioned-message.new {
            animation: mentionPulse 2s ease-in-out;
        }

        /* Light mode */
        #messageListdiv {
            height: 70dvh !important;
            overflow-x: hidden;
            overflow-y: auto;
            scroll-behavior: smooth;
            background-color: white;
        }

        /* Dark mode - using very specific selectors */
        body.dark-mode #chatsView,
        body.dark-mode #messageListdiv,
        body.dark-mode #messageList {
            background-color: #1e1e1e !important;
        }

        /* Message container in dark mode */
        body.dark-mode .message-item {
            background-color: #1e1e1e !important;
            color: white;
        }
    </style>
</head>

<body id="body">
    <div id="mainapp">
        <br>
        <div class="container mt-3">
            <div class="alert alert-danger alert-dismissible fade show" id="usageshutdown" style="display: none;">
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                <strong>Oh no!</strong> We have currently shutdown our servers for some maintenance. Please be patient
                with us
                while we fix this issue!
            </div>

            <div class="alert alert-danger alert-dismissible fade show" id="dbalert" style="display: block;">
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                <strong>Hey There!</strong> We will be sutting down the chat app starting mid Feb. We will launch V2 by the end of Feb.
            </div>

            <div class="alert alert-warning alert-dismissible fade show" id="outofdateclient" style="display: none;">
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                <strong>Hey!</strong> If you are seeing this message, it means that you are viewing an outdated version!
                Click the button to continue: <button onclick="window.location.reload(true)"
                    style="background-color: rgb(103, 92, 0) !important; width: 70px !important; height: 30px !important; border-radius: 5px !important; color: white !important;">Reload</button>
            </div>
            <div class="alert alert-light alert-dismissible fade show" id="patreonThanks" style="display: none;">
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                <strong>Thank you!</strong> Thank you for being a Patreon member. We have given you some extra perks for
                this. (Perks: VIP Chat Tag, 1.5x Longer Messages)
            </div>
            <div class="alert alert-info alert-dismissible fade show" id="internetcheck" style="display: none;">
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                <strong>Info!</strong> Your internet connection is currently offline. You won't be able to see or send
                new messages.
            </div>
            <div class="alert alert-primary alert-dismissible fade show" id="twitchlive" style="display: none;">
                <!-- <button type="button" class="btn-close" data-bs-dismiss="alert"></button> -->
                <strong>LIVE CONTENT!</strong> DRAGEno01 is now live on Twitch. <a href="https://twitch.tv/DRAGEno01"
                    target="_blank"><button
                        style="background-color: rgb(97, 0, 195) !important; width: 100px !important; height: 30px !important; border-radius: 5px !important; color: white !important;">Watch
                        Now</button></a>
            </div>
            <!-- <div class="alert alert-danger alert-dismissible fade show">
      <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
      <strong>Systems Down</strong> There is currently an issue with our servers. We will be back once we have patched
      the issue... This may take a few hours.
    </div> 
    <div class="alert alert-info alert-dismissible fade show">
      <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
      <strong>Info!</strong> The servers are back up, you can check the status <a
        href="https://drageno01.github.io/?chatstatus"><u>here</u></a>!
    </div> -->
        </div>
        <script type="module" src="publish.js"></script>

        <div id="joinView" class="bg-gray-100 w-96 items-center mx-auto flex flex-col mt-10 rounded-md p-4 space-y-4">
            <h1 class="text-center font-bold" style="font-size: xx-large;">Join Chat</h1>
            <div class="flex space-x-1">
                <input id="usernameInput" type="text" class="bg-white border border-gray-200 rounded-md px-2"
                    placeholder="Enter a Username" maxlength="15" />
                <button id="joinButton" class="bg-indigo-600 px-2 py-1 text-sm text-white rounded-md">Join</button>
            </div>
            <p>Google&trade; Sign-In <b>Required</b></p>
            <p style="font-size: xx-small;" id="clientVersion">Client Version: Loading | Server Version: Loading | Chat
                Status: Loading</p>
        </div>

        <div id="chatsView" class="w-64 h-96 mx-auto flex flex-col mt-10 hidden bg-white dark:bg-gray-800">
            <button class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 border border-blue-700 rounded"
                id="scrollbutton">Disable Autoscroll</button>
            <div id="messageListdiv" class="flex-1 bg-white dark:bg-gray-800 overflow-y-auto">
                <ul id="messageList" class="py-2 bg-white dark:bg-gray-800"></ul>
            </div>
            <div class="input-area border-t dark:border-gray-700 p-3">
                <div class="flex gap-2">
                    <input 
                        id="messageInput" 
                        type="text" 
                        class="flex-1 px-3 py-1.5 bg-gray-50 dark:bg-gray-700 rounded focus:outline-none focus:ring-1 focus:ring-indigo-500 dark:focus:ring-indigo-400 text-white"
                        placeholder="Message" 
                        maxlength="100"
                    >
                    <button id="imageButton" class="px-4 py-1.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-md shadow-sm transition-all duration-200 transform hover:scale-105">
                        üòä
                    </button>
                    <button id="sendButton" class="px-4 py-1.5 bg-indigo-500 hover:bg-indigo-600 text-white rounded-md shadow-sm transition-all duration-200 transform hover:scale-105 font-medium">
                        Send
                    </button>
                </div>
            </div>
        </div>



        <!-- MODAL -->

        <div id="id01" class="w3-modal">
            <div class="w3-modal-content w3-card-4 w3-animate-zoom">
                <header class="w3-container w3-blue">
                    <!-- <span onclick="document.getElementById('id01').style.display='none'"
                        class="w3-button w3-blue w3-xlarge w3-display-topright">&times;</span> -->
                    <h1 style="font-size: xx-large !important;">DRAGE Chat</h1>
                </header>

                <div class="w3-bar w3-border-bottom">
                    <button class="tablink w3-bar-item w3-button" onclick="openCity(event, 'rules')">Rules</button>
                    <button class="tablink w3-bar-item w3-button" onclick="openCity(event, 'badges')">Chat
                        Badges</button>
                    <button class="tablink w3-bar-item w3-button" onclick="openCity(event, 'important')">Extra
                        Information</button>
                </div>

                <div id="rules" class="w3-container city">
                    <br>
                    <b>
                        <h1 style="font-size: x-large !important;">Rules</h1>
                    </b>
                    <p>
                        Welcome to DRAGEno01's chat app. To make this experience the best for everyone, please read and
                        understand the rules! <i>These rules are just the basics. A full list of them can be found under
                            the 'Extra Information' page.</i><br><br>
                        <b>Section One - Usernames</b><br>
                        Usernames should always be G-PG rated. Any username that is not clean for all ages should be
                        changed before sending messages. Any username that is not following these rules will be
                        moderated.<i> </i>
                        Usernames that contain emojis, spaces should be changed as for our verification system. Any name
                        that is not changed will be moderated.
                        <br><br>
                        <b>Section Two - Messages</b><br>
                        All messages should be PG and not contain any harsh swearing or racial slurs. Any message that
                        is will be moderated.<i> </i>
                        All messages should be in English (unless said so otherwise), and there should be no links in
                        chat. Accounts will be moderated.
                        <br><br>
                        <b>Section Three - Requirements</b><br>
                        Even though we try to moderate the chat, we do request all users under the age of <b>14</b> to
                        kindly leave the chat as there may be certain topics/messages that may not be appropriate for
                        them.<br>
                        Any accounts will be banned if the user's age is under <b>14</b> to keep everyone safe.<br>
                        If you are under the age of 14, you can still leave before you get banned for being underage.
                    </p><br>
                </div>

                <div id="badges" class="w3-container city">
                    <br>
                    <b>
                        <h1 style="font-size: x-large !important;">Chat Badges</h1>
                    </b>
                    <p>They may look fancy, but these badges are here to show who is who.</p><br><br>
                    <p>
                        üõ†Ô∏è - This badge is given to all staff members who work on the code of the chat app.<br>
                        ü™≤ - This badge is given to all staff members who are bug testers of our chat app.<br>
                        üî• - This badge is given to all the players within the <a target="_blank"
                            href="https://bit.ly/dragecs"><u style="color: blue !important;">DRAGE-CS</u></a> team.<br>
                        üíé - This badge is given to all Patreon members who have at least the chat upgrade
                        membership.<br>
                        ‚úîÔ∏è - This badge is given to anyone with the following badges to verify their identity: üõ†Ô∏è, ü™≤,
                        üî•
                    </p><br>
                </div>

                <div id="important" class="w3-container city">
                    <br>
                    <b>
                        <h1 style="font-size: x-large !important;">Important Information</h1>
                    </b>
                    <p>
                        Here are a few important links that might be helpful to know.<br><br>
                        <a href="help.html" target="_blank"><u style="color: blue !important;">Chat App
                                Rules</u></a><br>
                        <a href="help.html" target="_blank"><u style="color: blue !important;">Terms &
                                Conditions</u></a><br>
                        <a href="help.html" target="_blank"><u style="color: blue !important;">Privacy Policy</u></a>
                    </p><br>
                </div>

                <div class="w3-container w3-light-grey w3-padding">
                    <button class="w3-button w3-right w3-white w3-border"
                        onclick="document.getElementById('id01').style.display='none'">I Agree to the Rules, Terms &
                        Conditions, and Privacy Policy</button>
                </div>
            </div>
        </div>




        <!-- IMAGE MODAL -->
        <div id="id02" class="w3-modal">
            <div class="w3-modal-content w3-card-4 w3-animate-zoom">
                <header class="w3-container w3-blue">
                    <!-- <span onclick="document.getElementById('id01').style.display='none'"
                        class="w3-button w3-blue w3-xlarge w3-display-topright">&times;</span> -->
                    <h1 style="font-size: xx-large !important;">DRAGE Chat</h1>
                </header>

                <div class="w3-bar w3-border-bottom">
                    <button id="imagestab" class="tablink w3-bar-item w3-button" onclick="openCity(event, 'images')">Images</button>
                    <button class="tablink w3-bar-item w3-button" onclick="openCity(event, 'gifs')">GIFs</button>
                </div>

                <div id="images" class="w3-container city">
                    <br>
                    <b>
                        <h1 style="font-size: x-large !important;">Images</h1>
                    </b>
                    <br>
                    <center>
                        <button class="spec bg-blue-600 p-2 rounded-lg" style="width: 200px !important; height: 200px !important;" id="img1"></button>
                        <button class="spec bg-blue-600 p-2 rounded-lg" style="width: 200px !important; height: 200px !important;" id="img2"></button>
                        <button class="spec bg-blue-600 p-2 rounded-lg" style="width: 200px !important; height: 200px !important;" id="img3"></button>
                        <button class="spec bg-blue-600 p-2 rounded-lg" style="width: 200px !important; height: 200px !important;" id="img4"></button>
                        <button class="spec bg-blue-600 p-2 rounded-lg" style="width: 200px !important; height: 200px !important;" id="img5"></button>
                        <button class="spec bg-blue-600 p-2 rounded-lg" style="width: 200px !important; height: 200px !important;" id="img6"></button>
                    </center>
                </div>

                <div id="gifs" class="w3-container city">
                    <br>
                    <b>
                        <h1 style="font-size: x-large !important;">GIFs</h1>
                    </b>
                    <br>
                    <center>
                        <button class="spec bg-blue-600 p-2 rounded-lg" style="width: 200px !important; height: 200px !important;" id="gif1"></button>
                        <button class="spec bg-blue-600 p-2 rounded-lg" style="width: 200px !important; height: 200px !important;" id="gif2"></button>
                        <button class="spec bg-blue-600 p-2 rounded-lg" style="width: 200px !important; height: 200px !important;" id="gif3"></button>
                        <button class="spec bg-blue-600 p-2 rounded-lg" style="width: 200px !important; height: 200px !important;" id="gif4"></button>
                        <button class="spec bg-blue-600 p-2 rounded-lg" style="width: 200px !important; height: 200px !important;" id="gif5"></button>
                        <button class="spec bg-blue-600 p-2 rounded-lg" style="width: 200px !important; height: 200px !important;" id="gif6"></button>
                    </center>
                </div>

                <div class="w3-container w3-light-grey w3-padding">
                    <button id="specclosebtn" class="w3-button w3-right w3-white w3-border"
                        onclick="document.getElementById('id02').style.display='none'">Close</button>
                </div>
            </div>
        </div>





        <center style="display: none;" id="audioOptions">
            <table>
                <td>
                    <button id="audioMute" class="px-4 py-2 bg-indigo-500 hover:bg-indigo-600 text-white rounded-md shadow-sm transition-all duration-200 transform hover:scale-105 font-medium">
                        Mute Tab Sound
                    </button>
                </td>
                <td>
                    <button id="staffButtonOne" style="display: none;" class="px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-md shadow-sm transition-all duration-200 transform hover:scale-105 font-medium" onclick="window.open('https://forms.gle/xEntAFhwddWAgsAb7','_blank')">
                        Bug Report Form
                    </button>
                </td>
                <td>
                    <button id="staffButtonTwo" style="display: none;" class="px-4 py-2 bg-yellow-500 hover:bg-yellow-600 text-white rounded-md shadow-sm transition-all duration-200 transform hover:scale-105 font-medium" onclick="window.open('https://forms.gle/fGiDMQvJaDpyaWZA8','_blank')">
                        User Report Form
                    </button>
                </td>
                <td>
                    <button id="themeToggle" class="px-4 py-2 bg-purple-500 hover:bg-purple-600 text-white rounded-md shadow-sm transition-all duration-200 transform hover:scale-105 font-medium">
                        Toggle Theme
                    </button>
                </td>
                <td>
                    <button id="logoutButton" class="px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-md shadow-sm transition-all duration-200 transform hover:scale-105 font-medium">
                        Logout
                    </button>
                </td>
            </table>
        </center>
    </div>

    <div id="emergency" style="display: none;">
        <img src="https://drageno01.github.io/projects/mainprojects/drage-chat/seqtalearn.png"
            style="width: 100dvw; height: 100dvh;">
    </div>

    <script>
        // window.history.pushState("pageTitle", "DRAGE Chat", "/chat");
        document.onkeydown = keydown;
        let showingImage = false;

        function keydown(evt) {
            if (!evt) evt = event;
            if (evt.altKey) {
                if (!showingImage) {
                    document.getElementById("emergency").style.display = "block";
                    document.getElementById("mainapp").style.display = "none";
                    showingImage = true;
                } else {
                    document.getElementById("emergency").style.display = "none";
                    document.getElementById("mainapp").style.display = "block";
                    showingImage = false;
                }
            }
        }
    </script>

    <script>
        document.getElementsByClassName("tablink")[0].click();

        function openCity(evt, cityName) {
            var i, x, tablinks;
            x = document.getElementsByClassName("city");
            for (i = 0; i < x.length; i++) {
                x[i].style.display = "none";
            }
            tablinks = document.getElementsByClassName("tablink");
            for (i = 0; i < x.length; i++) {
                tablinks[i].classList.remove("w3-light-grey");
            }
            document.getElementById(cityName).style.display = "block";
            evt.currentTarget.classList.add("w3-light-grey");
        }
    </script>

    <!-- <img src="https://c.tenor.com/jqv9q8ho5BEAAAAC/tenor.gif" width="80%"> -->
</body>

</html>
