<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv='cache-control' content='no-cache'> 
    <meta http-equiv='expires' content='0'> 
    <meta http-equiv='pragma' content='no-cache'>
    <title>Online Notepad</title>
    <!-- Main CSS -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Agbalumo&family=Dosis&family=Kdam+Thmor+Pro&family=PT+Serif&family=Playpen+Sans&display=swap');
    
        #notepad {
            width: 95%;
            height: 75vh;
            resize: vertical;
            font-size: large;
            border-radius: 10px;
        }
    
        #title {
            margin-left: 4.5vh;
            font-family: "Kdam Thmor Pro", cursive;
        }
    
        input {
            border-radius: 10px;
            border-width: 0;
            width: 30vh;
            height: 3vh;
            text-align: center;
        }
    
        body {
            background-color: #c7c7c7;
        }
    
        button {
            width: 15vh;
            border-radius: 10px;
            border-width: 0;
            height: 3vh;
            background-color: #e6e6e6;
        }
    </style>
    <!-- Modal CSS -->
    <style>
        .modal {
            display: none;
            /* Hidden by default */
            position: fixed;
            /* Stay in place */
            z-index: 1;
            /* Sit on top */
            padding-top: 100px;
            /* Location of the box */
            left: 0;
            top: 0;
            width: 100%;
            /* Full width */
            height: 100%;
            /* Full height */
            overflow: auto;
            /* Enable scroll if needed */
            background-color: rgb(0, 0, 0);
            /* Fallback color */
            background-color: rgba(0, 0, 0, 0.62);
            /* Black w/ opacity */
        }
    
        /* Modal Content */
        .modal-content {
            position: relative;
            background-color: #fefefe;
            margin: auto;
            padding: 0;
            border: 1px solid #888;
            width: 80%;
            box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.425), 0 6px 20px 0 rgba(0, 0, 0, 0.64);
            -webkit-animation-name: animatetop;
            -webkit-animation-duration: 0.4s;
            animation-name: animatetop;
            animation-duration: 0.4s;
            border-radius: 20px;
        }
    
        /* Add Animation */
        @-webkit-keyframes animatetop {
            from {
                top: -300px;
                opacity: 0
            }
    
            to {
                top: 0;
                opacity: 1
            }
        }
    
        @keyframes animatetop {
            from {
                top: -300px;
                opacity: 0
            }
    
            to {
                top: 0;
                opacity: 1
            }
        }
    
        /* The Close Button */
        .close {
            color: white;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }
    
        .close:hover,
        .close:focus {
            color: #000;
            text-decoration: none;
            cursor: pointer;
        }
    
        .modal-header {
            padding: 2px 16px;
            background-color: #757575;
            color: white;
            border-radius: 18px;
        }
    
        .modal-body {
            padding: 2px 16px;
        }
    
        .modal-footer {
            padding: 2px 16px;
            background-color: #5cb85c;
            color: white;
        }
    </style>
</head>

<body id="mainbody">
    <h1 id="title" style="display: inline-block;">Online Notepad</h1>
    <div class="settings" style="display: inline-block;margin-left: 20px;">
        <button id="myBtn" style="width: 200px; height: 30px;margin-top: -20px;">Settings</button>
        <!-- The Modal -->
        <div id="myModal" class="modal">
        <!-- Modal content -->
        <div class="modal-content">
            <div class="modal-header">
            <span class="close">&times;</span>
                <h2>Notepad Settings</h2>
            </div>
            <div class="modal-body">
                <table>
                    <td style="width: 30%;"><h3>Background Color</h3></td>
                    <td style="width: 30%;"><input type="color" name="backgroundcolor" id="backgroundcolorpicker" onchange="setbackground()"></td>
                    <td style="width: 30%;"><button onclick="resetbackground()">Reset Color</button></td>
                </table>
                <table>
                    <td style="width: 30%;"><h3>Text Color (All Text)</h3></td>
                    <td style="width: 30%;"><input type="color" name="textcolor" id="textcolorpicker" onchange="settextcolor()"></td>
                    <td style="width: 30%;"><button onclick="resettext()">Reset Color</button></td>
                </table>
                <table>
                    <td style="width: 30%;"><h3>Notepad Background Color</h3></td>
                    <td style="width: 30%;"><input type="color" name="notebackgroundcolor" id="notebackgroundcolorpicker" onchange="setnotepadcolor()"></td>
                    <td style="width: 30%;"><button onclick="resetnotepadcolor()">Reset Color</button></td>
                </table>
                <table>
                    <td style="width: 30%;"><h3>Button Color (All Buttons)</h3></td>
                    <td style="width: 30%;"><input type="color" name="notebackgroundcolor" id="notebackgroundcolorpicker" onchange="setbuttoncolor()"></td>
                    <td style="width: 30%;"><button onclick="resetbuttoncolor()">Reset Color</button></td>
                </table>
            </div>
            <!-- <div class="modal-footer">
                <h3>Modal Footer</h3>
            </div> -->
        </div>
        </div>    
    </div>
    <br>
    <br>
    <center>
        <textarea id="notepad" placeholder="Place your cursor inside the box by clicking or tapping on it.
Once the cursor is positioned, you can start typing your desired text.
The text you enter will appear directly within the box as you type."></textarea>
        <input type="text" placeholder="File Name (.txt)" id="filename">
        <button onclick="getFileName()" id="downloadBtn">Download</button>
    </center>
    
    <!-- Everything Else JS -->
    <script>
        var backgroundcolorpicker = document.getElementById("backgroundcolorpicker")
        var textcolorpicker = document.getElementById("textcolorpicker")


        function setbackground(){
            document.getElementById("mainbody").style.backgroundColor = backgroundcolorpicker.value
            console.error(backgroundcolorpicker.value)
        }
        function resetbackground(){
            document.getElementById("mainbody").style.backgroundColor = "#c7c7c7"
        }
        function settextcolor(){
            document.getElementById("mainbody").style.color = textcolorpicker.value
            document.getElementById("notepad").style.color = textcolorpicker.value
        }
        function resettext(){
            document.getElementById("mainbody").style.color = "#000000"
            document.getElementById("notepad").style.color = "#000000"
        }
        function setnotepadcolor(){
            document.getElementById("notepad").style.backgroundColor = notebackgroundcolorpicker.value
        }
        function resetnotepadcolor(){
            document.getElementById("notepad").style.backgroundColor = "#FFFFFF"
        }
        function setnotepadcolor(){
            document.getElementById("notepad").style.backgroundColor = notebackgroundcolorpicker.value
        }
        function resetnotepadcolor(){
            document.getElementById("notepad").style.backgroundColor = "#FFFFFF"
        }


        function getFileName(){
            var fileName = document.getElementById("filename")
            var filenamegiven = fileName.value
            if(filenamegiven === ""){
                filenamegiven = "onlineNotepad-download"
            }
            saveTextAsFile(notepad.value,filenamegiven+".txt")
        }


        function saveTextAsFile(textToWrite, fileNameToSaveAs) {
            var textFileAsBlob = new Blob([textToWrite], { type: 'text/plain' });
            var downloadLink = document.createElement("a");
            downloadLink.download = fileNameToSaveAs;
            downloadLink.innerHTML = "Download File";
            if (window.webkitURL != null) {
                downloadLink.href = window.webkitURL.createObjectURL(textFileAsBlob);
            }
            else {
                downloadLink.href = window.URL.createObjectURL(textFileAsBlob);
                downloadLink.onclick = destroyClickedElement;
                downloadLink.style.display = "none";
                document.body.appendChild(downloadLink);
            }

            downloadLink.click();
        }


        document.onkeydown = (e) => {
            if (e.key == 123) {
                e.preventDefault();
            }
            if (e.ctrlKey && e.shiftKey && e.key == 'I') {
                e.preventDefault();
            }
            if (e.ctrlKey && e.shiftKey && e.key == 'C') {
                e.preventDefault();
            }
            if (e.ctrlKey && e.shiftKey && e.key == 'J') {
                e.preventDefault();
            }
            if (e.ctrlKey && e.key == 'U') {
                e.preventDefault();
            }
        };
        document.addEventListener('contextmenu', function(e) {
            e.preventDefault();
        });

    </script>
    <!-- Modal JS -->
    <script>
        // Get the modal
        var modal = document.getElementById("myModal");
        
        // Get the button that opens the modal
        var btn = document.getElementById("myBtn");
        
        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];
        
        // When the user clicks the button, open the modal 
        btn.onclick = function() {
        modal.style.display = "block";
        }
        
        // When the user clicks on <span> (x), close the modal
        span.onclick = function() {
        modal.style.display = "none";
        }
        
        // When the user clicks anywhere outside of the modal, close it
        // window.onclick = function(event) {
        // if (event.target == modal) {
        //     modal.style.display = "none";
        // }
        // }
    </script>
    <script>
        window.history.pushState("pageTitle", "Online Notpad", "/?notepad");
    </script>
</body>

</html>
